# s7ioserver 配置文件
# 格式: INI风格，支持多PLC

# ---- 全局设置 ----
[general]
gplat_server = 127.0.0.1
gplat_port = 8777
board_name = BOARD
reconnect_interval = 3000

# ---- PLC定义 ----
# 每个PLC一个section，section名任意（不能重复）
# PLC参数:
#   ip            - PLC的IP地址
#   rack          - 机架号（通常为0）
#   slot          - 槽号（S7-300/400通常为2，S7-1200/1500通常为1）
#   poll_interval - 轮询间隔（毫秒）

# ---- Tag定义 ----
# 格式: tag.名称 = 区域, DB号, 偏移量, 数据类型 [, 最大长度]
#
# 区域:
#   DB  - 数据块 (Data Block)
#   I   - 输入 (Inputs, 也可写EB)
#   Q   - 输出 (Outputs, 也可写AB)
#   M   - 中间寄存器 (Merkers, 也可写MK)
#
# DB号:
#   DB区域时为DB编号（如1表示DB1）
#   I/Q/M区域时填0
#
# 偏移量:
#   字节偏移.位偏移 (位偏移仅BOOL类型使用，0-7)
#   例: 0 表示字节偏移0
#       0.3 表示字节0的第3位
#
# 数据类型:
#   BOOL   - 布尔 (1位, Board中存为1字节)
#   INT    - 有符号16位整数
#   WORD   - 无符号16位整数
#   DINT   - 有符号32位整数
#   DWORD  - 无符号32位整数
#   REAL   - 32位浮点数
#   STRING - S7字符串 (需指定最大长度，默认254)
#
# 注意: tag名称在所有PLC之间必须全局唯一
#       Board中的tag须事先通过createtag/CreateItem创建好

[PLC_Line1]
ip = 192.168.1.10
rack = 0
slot = 1
poll_interval = 200

tag.motor_run      = DB, 1, 0.0,  BOOL
tag.motor_speed    = DB, 1, 2,    INT
tag.temperature    = DB, 1, 4,    REAL
tag.alarm_word     = DB, 1, 8,    WORD
tag.counter        = DB, 1, 10,   DINT
tag.status_dw      = DB, 1, 14,   DWORD
tag.recipe_name    = DB, 1, 18,   STRING, 32
tag.input_0_0      = I,  0, 0.0,  BOOL
tag.output_word    = Q,  0, 0,    WORD
tag.merker_real    = M,  0, 100,  REAL

# [PLC_Line2]
# ip = 192.168.1.11
# rack = 0
# slot = 1
# poll_interval = 500
#
# tag.pressure       = DB, 100, 0,   REAL
# tag.valve_open     = DB, 100, 4.0, BOOL
